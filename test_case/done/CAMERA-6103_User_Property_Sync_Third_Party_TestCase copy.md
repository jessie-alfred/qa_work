# CAMERA-6103 Android ç”¨æˆ¶å±¬æ€§åŒæ­¥ç¬¬ä¸‰æ–¹æœå‹™æ¸¬è©¦æ¡ˆä¾‹

## ğŸ“ æ¸¬è©¦æ¡ˆä¾‹

## 1. åŠŸèƒ½èˆ‡æ¥­å‹™é‚è¼¯æ¸¬è©¦ (Functional & Business Logic)

### 1.1 ç¡¬é«”è£ç½®é…å°å®Œæˆå¾Œ User Properties åŒæ­¥æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç¡¬é«”è£ç½®é…å°å®Œæˆå¾Œï¼Œ`eligible_hw_free_trial`ã€`is_alfredcam_owner` æ­£ç¢ºåŒæ­¥åˆ° Third-Party

**é æœŸçµæœ**ï¼š
- API Response åŒ…å« `eligible_hw_free_trial`ã€`is_alfredcam_owner` æ¬„ä½
- `is_alfredcam_owner` å€¼ç‚º `true`ï¼ˆBooleanï¼‰
- Third-Party å¾Œå°æ­£ç¢ºè¨˜éŒ„å±¬æ€§å€¼
- RevenueCat çš„ `is_alfredcam_owner` ç‚º String å‹æ…‹ï¼ˆ"true"ï¼‰
- åŒæ­¥æ™‚é–“ < 5 ç§’ï¼ˆå³æ™‚åŒæ­¥ï¼‰

---

### 1.2 è¨‚é–±è³¼è²·å®Œæˆå¾Œ User Properties åŒæ­¥æ¸¬è©¦ - Premium
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Premium è¨‚é–±è³¼è²·å®Œæˆå¾Œï¼Œæ‰€æœ‰è¨‚é–±ç›¸é—œå±¬æ€§æ­£ç¢ºåŒæ­¥åˆ° Third-Party

**é æœŸçµæœ**ï¼š
- Polling æ©Ÿåˆ¶æ­£å¸¸é‹ä½œï¼ˆæ¯ 1 ç§’è¼ªè©¢ä¸€æ¬¡ï¼‰
- API å›å‚³ `updated = true` æ™‚åœæ­¢è¼ªè©¢
- æ‰€æœ‰è¨‚é–±å±¬æ€§æ­£ç¢ºåŒæ­¥åˆ° Third-Party
- RevenueCat çš„ Boolean å±¬æ€§è½‰æ›ç‚º Stringï¼ˆå¦‚ `"true"`ã€`"false"`ï¼‰
- åŒæ­¥æ™‚é–“ < 10 ç§’ï¼ˆåŒ…å« Polling æ™‚é–“ï¼‰

---

### 1.3 è¨‚é–±è³¼è²·å®Œæˆå¾Œ User Properties åŒæ­¥æ¸¬è©¦ - Plus
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Plus è¨‚é–±è³¼è²·å®Œæˆå¾Œï¼Œæ‰€æœ‰è¨‚é–±ç›¸é—œå±¬æ€§æ­£ç¢ºåŒæ­¥åˆ° Third-Party

**é æœŸçµæœ**ï¼š
- `subscription_tier` ç‚º "plus"
- æ‰€æœ‰è¨‚é–±å±¬æ€§æ­£ç¢ºåŒæ­¥
- åŒæ­¥æ™‚é–“ < 10 ç§’

---

### 1.4 è¨‚é–±çºŒè¨‚å ´æ™¯æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰è¨‚é–±çºŒè¨‚æ™‚ï¼Œ`subscription_cycle_first` æ­£ç¢ºåŒæ­¥ç‚º `false`

**é æœŸçµæœ**ï¼š
- `subscription_cycle_first` ç‚º `false`
- å…¶ä»–è¨‚é–±å±¬æ€§æ­£ç¢ºæ›´æ–°
- å±¬æ€§æ­£ç¢ºåŒæ­¥åˆ° Third-Party

---

### 1.5 è¨‚é–±å–æ¶ˆå ´æ™¯æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰è¨‚é–±å–æ¶ˆæ™‚ï¼Œ`subscription_cancelled` æ­£ç¢ºåŒæ­¥ç‚º `true`

**é æœŸçµæœ**ï¼š
- `subscription_cancelled` ç‚º `true`
- å±¬æ€§æ­£ç¢ºåŒæ­¥åˆ° Third-Party

---

### 1.6 Polling æ©Ÿåˆ¶ - æˆåŠŸå ´æ™¯æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Polling æ©Ÿåˆ¶åœ¨ API å›å‚³ `updated = true` æ™‚æ­£ç¢ºåœæ­¢

**é æœŸçµæœ**ï¼š
- ç¬¬ä¸€æ¬¡è¼ªè©¢æˆåŠŸå¾Œç«‹å³åœæ­¢
- ä¸å†é€²è¡Œå¾ŒçºŒè¼ªè©¢
- å±¬æ€§æ­£ç¢ºåŒæ­¥
- ç¸½ç­‰å¾…æ™‚é–“ < 2 ç§’

---

### 1.7 Polling æ©Ÿåˆ¶ - æœ€å¤§é‡è©¦æ¬¡æ•¸æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Polling æ©Ÿåˆ¶åœ¨é”åˆ°æœ€å¤§é‡è©¦æ¬¡æ•¸ï¼ˆ5 æ¬¡ï¼‰æ™‚æ­£ç¢ºåœæ­¢

**é æœŸçµæœ**ï¼š
- æº–ç¢ºåŸ·è¡Œ 5 æ¬¡è¼ªè©¢
- æ¯æ¬¡è¼ªè©¢é–“éš”ç´„ 1 ç§’
- 5 æ¬¡å¾Œåœæ­¢è¼ªè©¢
- ç¸½ç­‰å¾…æ™‚é–“ç´„ 5 ç§’
- æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†æˆ–å›é€€æ©Ÿåˆ¶

---

### 1.8 å‹æ…‹è½‰æ›æ¸¬è©¦ - Boolean è½‰ Stringï¼ˆRevenueCatï¼‰
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Boolean å‹æ…‹å±¬æ€§æ­£ç¢ºè½‰æ›ç‚º String å¾ŒåŒæ­¥åˆ° RevenueCat

**é æœŸçµæœ**ï¼š
- RevenueCat çš„ Boolean å±¬æ€§è½‰æ›ç‚º String
- Amplitudeã€Appcues çš„ Boolean å±¬æ€§ä¿æŒ Boolean
- å‹æ…‹è½‰æ›æ­£ç¢ºç„¡èª¤

---

### 1.9 null å€¼è™•ç†æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ API Response ä¸­ null å€¼å±¬æ€§ä¸æœƒåŒæ­¥åˆ° Third-Party

**é æœŸçµæœ**ï¼š
- `null` å€¼å±¬æ€§è¢«å¿½ç•¥ï¼Œä¸æ›´æ–°åˆ° Third-Party
- ç¾æœ‰å±¬æ€§å€¼ä¿æŒä¸è®Š
- ç„¡éŒ¯èª¤æˆ–ç•°å¸¸

---

### 1.10 ç©ºå­—ä¸²è™•ç†æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ API Response ä¸­ç©ºå­—ä¸²å±¬æ€§æœƒåŒæ­¥åˆ° Third-Party

**é æœŸçµæœ**ï¼š
- ç©ºå­—ä¸²å±¬æ€§æœƒæ›´æ–°åˆ° Third-Party
- ç©ºå­—ä¸²è¦–åŒçµ¦äºˆåƒæ•¸ï¼Œä¸æ˜¯å¿½ç•¥

---

### 1.11 Properties Cache æ©Ÿåˆ¶æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Properties Cache æ©Ÿåˆ¶æ­£å¸¸é‹ä½œï¼Œæœ‰è®Šæ›´æ‰æ‰“ä¸Šå»

**é æœŸçµæœ**ï¼š
- Properties Cache æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ
- ç›¸åŒå€¼ä¸é‡è¤‡æ›´æ–°
- åªæœ‰è®Šæ›´çš„å±¬æ€§æ‰æœƒæ›´æ–°
- æ¸›å°‘ä¸å¿…è¦çš„ API èª¿ç”¨

---

### 1.12 å‘ä¸‹å…¼å®¹æ€§æ¸¬è©¦ - èˆŠç‰ˆ API Response
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰èˆŠç‰ˆ Client ä»å¯ä½¿ç”¨æ—¢æœ‰ API Response æ¬„ä½

**é æœŸçµæœ**ï¼š
- èˆŠç‰ˆ Client ä»å¯ä½¿ç”¨æ—¢æœ‰æ¬„ä½
- æ–°å¢æ¬„ä½ä¸å½±éŸ¿èˆŠç‰ˆ Client
- å‘ä¸‹å…¼å®¹æ€§æ­£å¸¸

---

## 2. ç©©å®šæ€§èˆ‡å¯é æ€§æ¸¬è©¦ (Stability & Reliability)

### 2.1 ç¶²è·¯ç•°å¸¸ - API å¤±æ•—è™•ç†æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ API å¤±æ•—æ™‚çš„å›é€€æ©Ÿåˆ¶å’ŒéŒ¯èª¤è™•ç†

**é æœŸçµæœ**ï¼š
- API å¤±æ•—æ™‚ç¹¼çºŒé‡è©¦ï¼ˆæœ€å¤š 5 æ¬¡ï¼‰
- æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†
- æœ‰å›é€€æ©Ÿåˆ¶ï¼ˆå¦‚ï¼šä½¿ç”¨èˆŠç‰ˆåŒæ­¥æ©Ÿåˆ¶ï¼‰
- App ä¸æœƒå´©æ½°æˆ–ç•°å¸¸

---

### 2.2 å¼±ç¶²ç’°å¢ƒæ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰å¼±ç¶²ç’°å¢ƒä¸‹ User Properties åŒæ­¥çš„ç©©å®šæ€§

**é æœŸçµæœ**ï¼š
- å¼±ç¶²ç’°å¢ƒä¸‹ Polling æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ
- å±¬æ€§æœ€çµ‚èƒ½æ­£ç¢ºåŒæ­¥ï¼ˆå¯èƒ½éœ€è¦æ›´é•·æ™‚é–“ï¼‰
- ç„¡å´©æ½°æˆ–ç•°å¸¸

---

### 2.3 ç¶²è·¯ä¸­æ–·æ¢å¾©æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç¶²è·¯ä¸­æ–·æ¢å¾©å¾Œ User Properties åŒæ­¥çš„æ¢å¾©èƒ½åŠ›

**é æœŸçµæœ**ï¼š
- ç¶²è·¯æ¢å¾©å¾Œç¹¼çºŒé‡è©¦
- èƒ½åœ¨å‰©é¤˜æ¬¡æ•¸å…§æˆåŠŸåŒæ­¥
- å±¬æ€§æœ€çµ‚æ­£ç¢ºåŒæ­¥

---

### 2.4 é•·æ™‚é–“é€£ç·šç©©å®šæ€§æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰é•·æ™‚é–“ä½¿ç”¨ App å¾Œ User Properties åŒæ­¥æ©Ÿåˆ¶ä»æ­£å¸¸é‹ä½œ

**é æœŸçµæœ**ï¼š
- é•·æ™‚é–“ä½¿ç”¨å¾ŒåŒæ­¥æ©Ÿåˆ¶ä»æ­£å¸¸é‹ä½œ
- ç„¡è¨˜æ†¶é«”æ´©æ¼
- ç„¡æ•ˆèƒ½ä¸‹é™
- å±¬æ€§åŒæ­¥æº–ç¢ºæ€§ä¸è®Š

---

### 2.5 ä¸¦ç™¼æ“ä½œæ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰åŒæ™‚é€²è¡Œå¤šå€‹æ“ä½œæ™‚ User Properties åŒæ­¥çš„æ­£ç¢ºæ€§

**é æœŸçµæœ**ï¼š
- ä¸¦ç™¼æ“ä½œä¸‹åŒæ­¥æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ
- æ¯å€‹å¸³è™Ÿçš„å±¬æ€§æ­£ç¢ºåŒæ­¥
- å±¬æ€§ä¸æœƒæ··æ·†
- ç„¡ç«¶æ…‹æ¢ä»¶æˆ–è³‡æ–™éŒ¯èª¤

---

## 3. ä½¿ç”¨è€…é«”é©—æ¸¬è©¦ (User Experience)

### 3.1 è¨‚é–±è³¼è²·æµç¨‹é«”é©—æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰è¨‚é–±è³¼è²·æµç¨‹çš„ç”¨æˆ¶é«”é©—ä¸å— Polling æ©Ÿåˆ¶å½±éŸ¿

**é æœŸçµæœ**ï¼š
- è³¼è²·æµç¨‹é †æš¢ï¼Œç„¡æ˜é¡¯å»¶é²
- ç”¨æˆ¶èƒ½ç«‹å³ä½¿ç”¨ Premium åŠŸèƒ½ï¼ˆå³ä½¿å±¬æ€§ä»åœ¨åŒæ­¥ä¸­ï¼‰
- Polling æ©Ÿåˆ¶ä¸å½±éŸ¿ç”¨æˆ¶é«”é©—
- ç¸½ç­‰å¾…æ™‚é–“æ§åˆ¶åœ¨ 5 ç§’å…§

---

### 3.2 é…å°æµç¨‹é«”é©—æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç¡¬é«”ç›¸æ©Ÿé…å°æµç¨‹çš„ç”¨æˆ¶é«”é©—ä¸å—æ–°å¢æ¬„ä½å½±éŸ¿

**é æœŸçµæœ**ï¼š
- é…å°æµç¨‹é †æš¢ï¼Œç„¡æ˜é¡¯å»¶é²
- ç”¨æˆ¶èƒ½ç«‹å³ä½¿ç”¨ç›¸æ©ŸåŠŸèƒ½
- æ–°å¢æ¬„ä½ä¸å½±éŸ¿ç”¨æˆ¶é«”é©—

---

## 4. æ•ˆèƒ½æ¸¬è©¦ (Performance)

### 4.1 Polling æ©Ÿåˆ¶æ•ˆèƒ½æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ Polling æ©Ÿåˆ¶å° App æ•ˆèƒ½å’Œé›»æ± æ¶ˆè€—çš„å½±éŸ¿

**é æœŸçµæœ**ï¼š
- CPU ä½¿ç”¨ç‡å¢åŠ  < 5%ï¼ˆåƒè€ƒå€¼ï¼‰
- è¨˜æ†¶é«”ä½¿ç”¨å¢åŠ  < 5MBï¼ˆåƒè€ƒå€¼ï¼‰
- ç¶²è·¯æµé‡ï¼šæœ€å¤š 5 æ¬¡ API èª¿ç”¨
- é›»æ± æ¶ˆè€—å¢åŠ åœ¨åˆç†ç¯„åœå…§
- ç¸½å½±éŸ¿æ™‚é–“ < 5 ç§’

---

### 4.2 å±¬æ€§åŒæ­¥å»¶é²æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰å±¬æ€§åŒæ­¥çš„å»¶é²æ™‚é–“ç¬¦åˆé æœŸï¼ˆå³æ™‚åŒæ­¥ï¼‰

**é æœŸçµæœ**ï¼š
- é…å°å®Œæˆå¾ŒåŒæ­¥å»¶é² < 5 ç§’
- è¨‚é–±è³¼è²·å®Œæˆå¾ŒåŒæ­¥å»¶é² < 10 ç§’ï¼ˆåŒ…å« Polling æ™‚é–“ï¼‰
- å¹³å‡å»¶é²æ™‚é–“ç¬¦åˆé æœŸ
- ç›¸æ¯” Server Side åŒæ­¥ï¼ˆ5-10 åˆ†é˜ï¼‰å¤§å¹…æ”¹å–„

---

## 5. è¿´æ­¸æ¸¬è©¦ (Regression Testing)

### 5.1 ç¡¬é«”ç›¸æ©Ÿé…å°åŠŸèƒ½è¿´æ­¸æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç¡¬é«”ç›¸æ©Ÿé…å°åŠŸèƒ½æœªå—å½±éŸ¿

**é æœŸçµæœ**ï¼š
- æ‰€æœ‰ç¡¬é«”ç›¸æ©Ÿé…å°åŠŸèƒ½æ­£å¸¸
- é…å°æµç¨‹èˆ‡ä¹‹å‰ç‰ˆæœ¬ä¸€è‡´
- ç„¡å›æ­¸å•é¡Œ

---

### 5.2 è¨‚é–±è³¼è²·åŠŸèƒ½è¿´æ­¸æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰è¨‚é–±è³¼è²·åŠŸèƒ½æœªå—å½±éŸ¿

**é æœŸçµæœ**ï¼š
- æ‰€æœ‰è¨‚é–±è³¼è²·åŠŸèƒ½æ­£å¸¸
- è¨‚é–±ç‹€æ…‹æ­£ç¢ºæ›´æ–°
- Premium/Plus åŠŸèƒ½æ­£å¸¸è§£é–
- ç„¡å›æ­¸å•é¡Œ

---

### 5.3 ç”¨æˆ¶æ¬Šé™èˆ‡è¨‚é–±è¿´æ­¸æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç”¨æˆ¶æ¬Šé™èˆ‡è¨‚é–±åŠŸèƒ½æœªå—å½±éŸ¿

**é æœŸçµæœ**ï¼š
- æ‰€æœ‰ç”¨æˆ¶æ¬Šé™åŠŸèƒ½æ­£å¸¸
- è¨‚é–±è½‰æ›æ­£å¸¸
- ç„¡å›æ­¸å•é¡Œ

---

### 5.4 ç¾æœ‰ User Properties åŒæ­¥è¿´æ­¸æ¸¬è©¦
**æ¸¬è©¦ç›®æ¨™**ï¼šé©—è­‰ç¾æœ‰çš„ Server Side User Properties åŒæ­¥æ©Ÿåˆ¶æœªå—å½±éŸ¿

**é æœŸçµæœ**ï¼š
- ç¾æœ‰ Server Side åŒæ­¥æ©Ÿåˆ¶æ­£å¸¸é‹ä½œ
- æ–°å±¬æ€§èˆ‡ç¾æœ‰å±¬æ€§ä¸è¡çª
- Client ç«¯å’Œ Server Side åŒæ­¥å…±å­˜æ­£å¸¸
