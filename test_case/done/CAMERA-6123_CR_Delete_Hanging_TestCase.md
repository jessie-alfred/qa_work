# CAMERA-6123 iOS CR Delete Hanging 測試案例

## 📋 測試概述

**Ticket**: CAMERA-6123  
**功能**: [iOS] CR Delete Hanging: hanging for at least 5000 ms  
**Sentry Issue**: [IOS-565](https://alfred-473c77691.sentry.io/issues/6215678512/?referrer=jira_integration)  
**Fix Versions**: iOS - 2026.1.0  
**建立日期**: 2025-12-XX  
**負責人**: QA Team - Jessie  
**狀態**: Testing

**產品專有名詞參考**：本測試案例中使用的專有名詞請參考 [Terminology Table v2](https://alfredlabs.atlassian.net/wiki/spaces/~590960658/pages/3834085744/Terminology+Table+v2)

### 變更重點
本 PR 為解決 iOS App 在執行 Continuous Recording (CR) Delete 操作時，資料庫操作（Statement.swift, Connection.swift）會導致 App hanging 至少 5000 ms 的效能問題。此問題會影響用戶體驗，導致 App 在刪除大量錄影資料時出現明顯卡頓。

**問題描述**：
- App 在執行 CR Delete 操作時會 hanging 至少 5000 ms
- 問題出現在資料庫操作層（Statement.swift line 185, Connection.swift line 692）
- 影響用戶刪除 Continuous Recording 錄影資料的體驗

### 核心變更
1. **資料庫操作優化**：
   - 優化 Statement.swift 中的資料庫操作邏輯
   - 優化 Connection.swift 中的同步操作
   - 減少資料庫操作阻塞主執行緒的時間

2. **效能改善**：
   - 減少 CR Delete 操作的 hanging 時間
   - 改善大量資料刪除時的效能
   - 確保資料庫操作不會阻塞 UI

---

## 🎯 測試重點與風險評估

### 影響模組/功能
1. **Continuous Recording (CR) 刪除功能** - 高影響
   - CR 錄影資料刪除操作
   - 大量資料刪除場景
   - 資料庫操作效能

2. **資料庫操作層** - 高影響
   - Statement.swift 中的資料庫操作
   - Connection.swift 中的同步操作
   - SQLite 資料庫效能

3. **用戶體驗** - 高影響
   - App 響應性
   - UI 流暢度
   - 操作等待時間

4. **記憶體與效能** - 中影響
   - 記憶體使用
   - CPU 使用率
   - 電池消耗

### 迴歸風險區
1. **Continuous Recording 功能**：
   - CR 錄影功能正常運作
   - CR 錄影資料儲存
   - CR 錄影資料播放

2. **資料庫操作**：
   - 其他資料庫操作（讀取、寫入、查詢）
   - 資料庫完整性
   - 資料庫交易處理

3. **刪除相關功能**：
   - 事件刪除功能
   - 相機刪除功能
   - 其他資料刪除操作

4. **App 穩定性**：
   - App 崩潰風險
   - 記憶體洩漏
   - 長時間運行穩定性

### 具體測試場景建議（含邊緣案例）
1. **CR Delete 效能測試**：
   - 刪除少量錄影資料（< 1 GB）
   - 刪除中等數量錄影資料（1-5 GB）
   - 刪除大量錄影資料（> 5 GB）
   - 驗證刪除操作時間 < 5000 ms（不再 hanging）

2. **資料庫操作測試**：
   - 驗證資料庫操作不會阻塞主執行緒
   - 驗證資料庫操作正確性
   - 驗證資料庫完整性

3. **並發操作測試**：
   - 刪除操作進行中時執行其他操作
   - 多個刪除操作同時進行
   - 刪除操作與錄影操作同時進行

4. **邊緣案例測試**：
   - 刪除空資料庫
   - 刪除已刪除的資料
   - 刪除操作中斷網路
   - 刪除操作中斷 App

5. **長時間運行測試**：
   - 多次連續刪除操作
   - 長時間使用後刪除操作
   - 記憶體和效能監控

---

## 📝 測試案例

## 1. 功能與業務邏輯測試 (Functional & Business Logic)

### 1.1 CR Delete 操作 - 少量資料測試
**測試目標**：驗證刪除少量 CR 錄影資料時，操作時間 < 5000 ms，不會出現 hanging

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製少量 CR 錄影資料（< 1 GB，約 1-2 小時的錄影）

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 記錄刪除操作開始時間（T1）
7. 監控 App 響應性：
   - 驗證 UI 不會完全凍結
   - 驗證可以取消操作（如有取消按鈕）
   - 驗證有適當的載入指示器
8. 等待刪除操作完成
9. 記錄刪除操作完成時間（T2）
10. 計算刪除操作時間：T2 - T1
11. 驗證錄影資料已正確刪除：
    - Playback 頁面顯示「No Footage」
    - 相機狀態中 `crStatus.earliestTimestamp` 為 "0"

**預期結果**：
- 刪除操作時間 < 5000 ms（不再 hanging）
- UI 保持響應性，不會完全凍結
- 有適當的載入指示器或進度提示
- 錄影資料正確刪除
- 無 App 崩潰或異常

---

### 1.2 CR Delete 操作 - 中等數量資料測試
**測試目標**：驗證刪除中等數量 CR 錄影資料時，操作時間合理，不會出現長時間 hanging

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製中等數量 CR 錄影資料（1-5 GB，約 5-10 小時的錄影）

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 記錄刪除操作開始時間（T1）
7. 監控 App 響應性：
   - 驗證 UI 不會完全凍結超過 5000 ms
   - 驗證有適當的載入指示器或進度提示
   - 驗證可以取消操作（如有取消按鈕）
8. 等待刪除操作完成
9. 記錄刪除操作完成時間（T2）
10. 計算刪除操作時間：T2 - T1
11. 驗證錄影資料已正確刪除

**預期結果**：
- 刪除操作過程中，UI 不會完全凍結超過 5000 ms
- 有適當的載入指示器或進度提示
- 刪除操作最終完成
- 錄影資料正確刪除
- 無 App 崩潰或異常

---

### 1.3 CR Delete 操作 - 大量資料測試
**測試目標**：驗證刪除大量 CR 錄影資料時，操作時間合理，不會出現長時間 hanging

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製大量 CR 錄影資料（> 5 GB，約 10+ 小時的錄影）

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 記錄刪除操作開始時間（T1）
7. 監控 App 響應性：
   - 驗證 UI 不會完全凍結超過 5000 ms
   - 驗證有適當的載入指示器或進度提示
   - 驗證可以取消操作（如有取消按鈕）
8. 等待刪除操作完成
9. 記錄刪除操作完成時間（T2）
10. 計算刪除操作時間：T2 - T1
11. 驗證錄影資料已正確刪除

**預期結果**：
- 刪除操作過程中，UI 不會完全凍結超過 5000 ms
- 有適當的載入指示器或進度提示
- 刪除操作最終完成（可能需要較長時間，但不會 hanging）
- 錄影資料正確刪除
- 無 App 崩潰或異常

---

### 1.4 CR Delete 操作 - 空資料庫測試
**測試目標**：驗證刪除空資料庫時，操作正常，不會出現異常

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 沒有 CR 錄影資料（空資料庫）

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 驗證顯示「No Footage」
4. 進入 Playback Settings
5. 點擊「Delete All Footage」選項（如果可用）
6. 確認刪除對話框（如果有）
7. 記錄操作時間
8. 驗證操作正常完成

**預期結果**：
- 操作正常完成，無異常
- 操作時間 < 1000 ms（空資料庫應快速完成）
- 無 App 崩潰或異常

---

### 1.5 CR Delete 操作 - 資料庫完整性測試
**測試目標**：驗證刪除操作後，資料庫完整性正常

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料

**測試步驟**：
1. 使用測試帳號登入 App
2. 記錄刪除前的資料庫狀態（如有工具可查看）
3. 進入相機的 Playback 頁面
4. 進入 Playback Settings
5. 點擊「Delete All Footage」選項
6. 確認刪除對話框
7. 等待刪除操作完成
8. 驗證資料庫完整性：
   - 驗證錄影資料已正確刪除
   - 驗證其他資料（如事件、設定等）未受影響
   - 驗證資料庫無損壞
9. 重新啟動 App
10. 驗證資料庫狀態仍然正確

**預期結果**：
- 錄影資料正確刪除
- 其他資料未受影響
- 資料庫完整性正常
- 重新啟動 App 後狀態正確

---

## 2. 穩定性與可靠性測試 (Stability & Reliability)

### 2.1 CR Delete 操作 - 並發操作測試
**測試目標**：驗證刪除操作進行中時，執行其他操作不會導致問題

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 在刪除操作進行中，嘗試執行其他操作：
   - 切換到其他頁面（如 Camera List）
   - 開啟 Live Feed
   - 查看事件列表
   - 進入設定頁面
7. 等待刪除操作完成
8. 驗證所有操作正常完成

**預期結果**：
- 刪除操作正常進行
- 其他操作可以正常執行
- 無 App 崩潰或異常
- 刪除操作最終完成

---

### 2.2 CR Delete 操作 - 多次連續刪除測試
**測試目標**：驗證多次連續刪除操作不會導致問題

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording

**測試步驟**：
1. 使用測試帳號登入 App
2. 執行第一次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄操作時間和結果
3. 執行第二次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄操作時間和結果
4. 執行第三次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄操作時間和結果
5. 驗證每次刪除操作都正常完成
6. 監控記憶體使用和效能

**預期結果**：
- 每次刪除操作都正常完成
- 每次刪除操作時間 < 5000 ms（不再 hanging）
- 記憶體使用穩定，無明顯洩漏
- 無 App 崩潰或異常

---

### 2.3 CR Delete 操作 - 長時間運行後刪除測試
**測試目標**：驗證長時間使用 App 後，刪除操作仍然正常

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording

**測試步驟**：
1. 使用測試帳號登入 App
2. 正常使用 App 30 分鐘以上：
   - 開啟 Live Feed
   - 查看事件
   - 進入 Playback
   - 執行其他操作
3. 錄製 CR 錄影資料
4. 進入 Playback Settings
5. 點擊「Delete All Footage」選項
6. 確認刪除對話框
7. 記錄刪除操作時間
8. 驗證刪除操作正常完成

**預期結果**：
- 刪除操作時間 < 5000 ms（不再 hanging）
- 刪除操作正常完成
- 無 App 崩潰或異常
- 記憶體使用正常

---

### 2.4 CR Delete 操作 - 網路中斷測試
**測試目標**：驗證刪除操作進行中網路中斷時，操作正常處理

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 在刪除操作進行中，中斷網路連線
7. 等待 5 秒
8. 恢復網路連線
9. 等待刪除操作完成
10. 驗證刪除操作結果

**預期結果**：
- 刪除操作正常處理網路中斷
- 刪除操作最終完成（可能需要重試）
- 無 App 崩潰或異常
- 錄影資料正確刪除

---

### 2.5 CR Delete 操作 - App 中斷測試
**測試目標**：驗證刪除操作進行中 App 被中斷時，操作正常處理

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 確認刪除對話框
6. 在刪除操作進行中，將 App 切換到背景（按 Home 鍵）
7. 等待 10 秒
8. 將 App 切換回前景
9. 等待刪除操作完成
10. 驗證刪除操作結果

**預期結果**：
- 刪除操作正常處理 App 中斷
- 刪除操作最終完成（可能需要恢復）
- 無 App 崩潰或異常
- 錄影資料正確刪除

---

## 3. 效能測試 (Performance)

### 3.1 CR Delete 操作 - 效能監控測試
**測試目標**：驗證刪除操作的效能指標符合預期

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料（中等數量，1-5 GB）
- 準備效能監控工具（Xcode Instruments）

**測試步驟**：
1. 啟動效能監控工具
2. 使用測試帳號登入 App
3. 進入相機的 Playback 頁面
4. 進入 Playback Settings
5. 點擊「Delete All Footage」選項
6. 確認刪除對話框
7. 記錄刪除操作開始時間（T1）
8. 監控以下指標：
   - CPU 使用率
   - 記憶體使用
   - 主執行緒阻塞時間
   - 資料庫操作時間
   - 網路流量（如有）
9. 等待刪除操作完成
10. 記錄刪除操作完成時間（T2）
11. 計算刪除操作時間：T2 - T1
12. 分析效能指標

**預期結果**：
- 刪除操作時間 < 5000 ms（不再 hanging）
- 主執行緒阻塞時間 < 5000 ms
- CPU 使用率在合理範圍內
- 記憶體使用穩定，無明顯洩漏
- 資料庫操作時間合理

---

### 3.2 CR Delete 操作 - 記憶體監控測試
**測試目標**：驗證刪除操作不會導致記憶體洩漏

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 準備記憶體監控工具（Xcode Instruments）

**測試步驟**：
1. 啟動記憶體監控工具
2. 使用測試帳號登入 App
3. 記錄初始記憶體使用
4. 執行第一次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄記憶體使用
5. 執行第二次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄記憶體使用
6. 執行第三次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄記憶體使用
7. 執行第四次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄記憶體使用
8. 執行第五次刪除操作：
   - 錄製少量 CR 錄影資料
   - 執行刪除操作
   - 記錄記憶體使用
9. 分析記憶體使用趨勢

**預期結果**：
- 記憶體使用穩定，無明顯洩漏
- 每次刪除操作後，記憶體使用回到合理範圍
- 無記憶體警告或崩潰

---

### 3.3 CR Delete 操作 - 電池消耗測試
**測試目標**：驗證刪除操作對電池消耗的影響在合理範圍內

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料（中等數量，1-5 GB）

**測試步驟**：
1. 記錄初始電池電量
2. 使用測試帳號登入 App
3. 進入相機的 Playback 頁面
4. 進入 Playback Settings
5. 點擊「Delete All Footage」選項
6. 確認刪除對話框
7. 等待刪除操作完成
8. 記錄最終電池電量
9. 計算電池消耗

**預期結果**：
- 電池消耗在合理範圍內
- 刪除操作不會導致異常的電池消耗
- 無過熱問題

---

## 4. 使用者體驗測試 (User Experience)

### 4.1 CR Delete 操作 - 用戶體驗測試
**測試目標**：驗證刪除操作的用戶體驗符合預期

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料（中等數量，1-5 GB）

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 驗證刪除確認對話框：
   - 對話框內容清晰
   - 確認和取消按鈕明顯
6. 確認刪除對話框
7. 觀察刪除操作過程：
   - 是否有載入指示器或進度提示
   - UI 是否保持響應性
   - 是否有適當的反饋
8. 等待刪除操作完成
9. 驗證刪除完成後的反饋：
   - 是否有成功提示
   - 頁面是否正確更新

**預期結果**：
- 刪除確認對話框清晰易用
- 刪除操作過程中有適當的載入指示器或進度提示
- UI 保持響應性，不會完全凍結超過 5000 ms
- 刪除完成後有適當的反饋
- 用戶體驗流暢

---

### 4.2 CR Delete 操作 - 取消操作測試
**測試目標**：驗證刪除操作可以正確取消

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機
- 相機已開啟 Continuous Recording
- 已錄製 CR 錄影資料

**測試步驟**：
1. 使用測試帳號登入 App
2. 進入相機的 Playback 頁面
3. 進入 Playback Settings
4. 點擊「Delete All Footage」選項
5. 在刪除確認對話框中，點擊「取消」按鈕
6. 驗證刪除操作未執行
7. 驗證錄影資料仍然存在

**預期結果**：
- 可以正確取消刪除操作
- 刪除操作未執行
- 錄影資料仍然存在
- 無異常

---

## 5. 迴歸測試 (Regression Testing)

### 5.1 Continuous Recording 功能迴歸測試
**測試目標**：驗證 CR Delete 優化不影響其他 CR 功能

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機

**測試步驟**：
1. 測試 CR 錄影功能：
   - 開啟 Continuous Recording
   - 驗證錄影正常進行
   - 驗證錄影資料正常儲存
2. 測試 CR 播放功能：
   - 進入 Playback 頁面
   - 播放 CR 錄影
   - 驗證播放正常
3. 測試 CR 設定功能：
   - 進入 CR 設定頁面
   - 修改 CR 設定
   - 驗證設定正常儲存
4. 測試 CR Delete 功能：
   - 執行刪除操作
   - 驗證刪除正常完成

**預期結果**：
- 所有 CR 功能正常運作
- CR Delete 優化不影響其他功能
- 無回歸問題

---

### 5.2 資料庫操作迴歸測試
**測試目標**：驗證 CR Delete 優化不影響其他資料庫操作

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機

**測試步驟**：
1. 測試資料庫讀取操作：
   - 讀取事件列表
   - 讀取相機列表
   - 讀取設定資料
2. 測試資料庫寫入操作：
   - 儲存設定
   - 儲存事件資料
3. 測試資料庫查詢操作：
   - 查詢事件
   - 查詢錄影資料
4. 測試資料庫刪除操作：
   - 刪除事件
   - 刪除 CR 錄影（本次優化項目）

**預期結果**：
- 所有資料庫操作正常運作
- CR Delete 優化不影響其他資料庫操作
- 資料庫完整性正常
- 無回歸問題

---

### 5.3 刪除相關功能迴歸測試
**測試目標**：驗證 CR Delete 優化不影響其他刪除功能

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機

**測試步驟**：
1. 測試事件刪除功能：
   - 刪除單個事件
   - 刪除多個事件
   - 驗證刪除正常完成
2. 測試相機刪除功能：
   - 刪除相機
   - 驗證刪除正常完成
3. 測試 CR Delete 功能：
   - 刪除 CR 錄影
   - 驗證刪除正常完成（本次優化項目）

**預期結果**：
- 所有刪除功能正常運作
- CR Delete 優化不影響其他刪除功能
- 無回歸問題

---

### 5.4 App 穩定性迴歸測試
**測試目標**：驗證 CR Delete 優化不影響 App 穩定性

**前置條件**：
- iOS 設備已安裝 App（**必須使用最新官方 iOS 版本**，基於 Test_Scenario.md）
- 測試帳號已配對相機

**測試步驟**：
1. 正常使用 App 30 分鐘以上
2. 執行各種操作：
   - 開啟 Live Feed
   - 查看事件
   - 進入 Playback
   - 執行 CR Delete 操作
   - 執行其他操作
3. 監控 App 穩定性：
   - 檢查是否有崩潰
   - 檢查是否有記憶體警告
   - 檢查是否有異常行為

**預期結果**：
- App 穩定運行，無崩潰
- 無記憶體警告
- 無異常行為
- CR Delete 優化不影響 App 穩定性

---

## 📊 測試總結

### 測試覆蓋範圍
- ✅ 功能與業務邏輯測試（5 個測試案例）
- ✅ 穩定性與可靠性測試（5 個測試案例）
- ✅ 效能測試（3 個測試案例）
- ✅ 使用者體驗測試（2 個測試案例）
- ✅ 迴歸測試（4 個測試案例）

**總計：20 個測試案例**

### 關鍵測試項目
1. **CR Delete 效能測試**：確保刪除操作時間 < 5000 ms（不再 hanging）
2. **資料庫操作測試**：確保資料庫操作不會阻塞主執行緒
3. **大量資料刪除測試**：確保大量資料刪除時效能正常
4. **並發操作測試**：確保刪除操作進行中其他操作正常
5. **記憶體監控測試**：確保無記憶體洩漏
6. **迴歸測試**：確保其他功能不受影響

### 風險評估
- **高風險項目**：
  - CR Delete 效能問題（核心問題）
  - 資料庫操作阻塞主執行緒
  - 大量資料刪除時的效能
- **中風險項目**：
  - 記憶體洩漏
  - 並發操作問題
  - 長時間運行穩定性

### 測試建議
1. **優先測試項目**：
   - CR Delete 操作 - 少量資料測試（核心功能驗證）
   - CR Delete 操作 - 中等數量資料測試（核心功能驗證）
   - CR Delete 操作 - 效能監控測試（核心問題驗證）

2. **重點驗證項目**：
   - 刪除操作時間 < 5000 ms（不再 hanging）
   - 主執行緒阻塞時間 < 5000 ms
   - 記憶體使用穩定，無洩漏
   - 資料庫操作正確性

3. **監控指標**：
   - 刪除操作時間 < 5000 ms（相比之前 hanging 至少 5000 ms 大幅改善）
   - 主執行緒阻塞時間 < 5000 ms
   - 記憶體使用穩定，無明顯洩漏
   - App 崩潰率 = 0%
   - 用戶體驗流暢

---

## 📝 測試記錄

### 測試環境
- **測試日期**：待填寫
- **測試人員**：待填寫
- **測試設備**：
  - iOS 設備：待填寫
  - **iOS 版本**：待填寫（**必須測試最新官方 iOS 版本**，基於 Test_Scenario.md）
- **App 版本**：iOS - 2026.1.0
- **測試場景**：待填寫
- **測試帳號**：
  - 測試帳號：待填寫
  - 相機配對狀態：待填寫

### 測試結果
- **通過項目**：待填寫
- **失敗項目**：待填寫
- **阻塞問題**：待填寫
- **已知問題**：待填寫

---

## 🔗 相關連結
- **Jira Ticket**: [CAMERA-6123](https://alfredlabs.atlassian.net/browse/CAMERA-6123) - [iOS] CR Delete Hanging: hanging for at least 5000 ms
- **Sentry Issue**: [IOS-565](https://alfred-473c77691.sentry.io/issues/6215678512/?referrer=jira_integration)
- **產品專有名詞**: [Terminology Table v2](https://alfredlabs.atlassian.net/wiki/spaces/~590960658/pages/3834085744/Terminology+Table+v2) - 阿褔管家 APP 產品專有名詞參考

---

## 📚 技術細節參考

### 問題描述
- **問題類型**：效能問題（Hanging）
- **影響範圍**：iOS App - Continuous Recording Delete 操作
- **問題位置**：
  - Statement.swift, line 185
  - Connection.swift, line 692
- **問題現象**：App hanging for at least 5000 ms

### 預期改善
- **刪除操作時間**：< 5000 ms（不再 hanging）
- **主執行緒阻塞時間**：< 5000 ms
- **用戶體驗**：流暢，無明顯卡頓

### 測試重點
1. **效能驗證**：確保刪除操作時間 < 5000 ms
2. **穩定性驗證**：確保無崩潰、無記憶體洩漏
3. **功能驗證**：確保刪除操作正確完成
4. **迴歸驗證**：確保其他功能不受影響
